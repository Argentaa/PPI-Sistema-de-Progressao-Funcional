CREATE TABLE docente (
  id INT(11) NOT NULL AUTO_INCREMENT,
  CPF VARCHAR(255) NOT NULL,
  SIAPE VARCHAR(255) NOT NULL,
  nome VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL,
  senha VARCHAR(255) NOT NULL,
  CPPD SMALLINT NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE requerimentos (
  id INT(11) NOT NULL AUTO_INCREMENT,
  usuario_id INT(11) NOT NULL,
  titulo VARCHAR(255) NOT NULL,
  descricao TEXT,
  status ENUM('pendente', 'aprovado', 'reprovado') NOT NULL DEFAULT 'pendente',
  data_criacao TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  FOREIGN KEY (usuario_id) REFERENCES docente (id)
);

CREATE TABLE partes (
  id INT(11) NOT NULL AUTO_INCREMENT,
  descricao VARCHAR(255) NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE categorias (
  id INT(11) NOT NULL AUTO_INCREMENT,
  parte_id INT(11) NOT NULL,
  descricao VARCHAR(255) NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (parte_id) REFERENCES partes (id)
);

CREATE TABLE criterios (
  id INT(11) NOT NULL AUTO_INCREMENT,
  categoria_id INT(11) NOT NULL,
  descricao VARCHAR(255) NOT NULL,
  pontos_string VARCHAR(255) NOT NULL,
  pontos INT(11) NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (categoria_id) REFERENCES categorias (id)
);

CREATE TABLE avaliacoes (
  id INT(11) NOT NULL AUTO_INCREMENT,
  requerimento_id INT(11) NOT NULL,
  criterio_id INT(11) NOT NULL,
  pontos_obtidos INT(11) NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (requerimento_id) REFERENCES requerimentos (id),
  FOREIGN KEY (criterio_id) REFERENCES criterios (id)
);

CREATE TABLE documentos (
  id INT(11) NOT NULL AUTO_INCREMENT,
  avaliacao_id INT(11) NOT NULL,
  caminho VARCHAR(255) NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (avaliacao_id) REFERENCES avaliacoes (id)
);

